<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    配置Retroarch的PC-98模拟器以在Android上执行东方Project旧作 - closesauce.
    
  </title>

  <meta name="description" content="">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2022/01/12/configure-retroarch-to-execute-pc98-touhou-on-android.html">
  <link rel="alternate" type="application/rss+xml" title="closesauce." href="/feed.xml">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">closesauce.</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead" style="background-image: url('/bgimage/76602490_p0_master1200.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>配置Retroarch的PC-98模拟器以在Android上执行东方Project旧作</h1>
            
            <span class="meta">Posted by
              <a href="#">cainslayer</a>
              on January 12, 2022 &middot; <span class="reading-time" title="Estimated read time">
  
   1 min  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <link rel="stylesheet" href="/extra/doc.css" />

<h2 id="前提">前提</h2>

<blockquote>
  <p>带有引用标识的知识均来自<strong>其他文章</strong>。</p>
</blockquote>

<h3 id="android手机执行东方project旧作的可能性">Android手机执行东方Project“旧作”的可能性</h3>

<p>“旧作”的目标机器是PC-98(80386)，RetroArch提供PC-98的模拟器，且模拟器在Android上原生执行，而PC-98需要的资源很小，故“旧作”可以在Android系统中高效执行。</p>

<p>RetroArch支持键盘输入，也支持横屏显示，基本满足游戏需要。</p>

<h3 id="关于旧作的压缩包">关于“旧作”的压缩包</h3>

<p>从互联网上下载的压缩包一般包含anex86（模拟器）和游戏的数据，由于使用RetroArch来模拟PC-98的环境，故只需关注<strong>无关于模拟器</strong>的数据。</p>

<p>游戏的数据分为两个文件：</p>

<ul>
  <li>字库(.bmp)</li>
  <li>存放游戏的磁盘映像(.hdi)</li>
</ul>

<p>从RetroArch拉取的模拟器的字库与游戏不兼容，故<strong>需要导入字库</strong>。</p>

<p>磁盘映像中建立了操作环境，故无需额外程序就可以引导。</p>

<h3 id="关于retroarch">关于RetroArch</h3>

<p>RetroArch打开后如果乱码（显示？？？），说明它可能不支持中文字库，可以清除数据，切换系统语言为English再进入。</p>

<p>RetroArch的不同版本具有差别，本文描述的RetroArch的版本为<strong>1.9.0</strong>。</p>

<h2 id="从retroarch执行东方project旧作">从RetroArch执行东方Project“旧作”</h2>

<p>以下叙述运行游戏的方法。</p>

<h3 id="建立pc-98环境">建立PC-98环境</h3>

<p>首先进入<code class="language-plaintext highlighter-rouge">Load Core</code>，<code class="language-plaintext highlighter-rouge">Download a Core</code>，下载<code class="language-plaintext highlighter-rouge">NEC - PC-98</code>，然后再选择它。</p>

<blockquote>
  <p>这里需要选用<code class="language-plaintext highlighter-rouge">Neko Project II Kai</code>版本，它具有更多的配置项。</p>
</blockquote>

<p>其次进入<code class="language-plaintext highlighter-rouge">Load Content</code>，选择游戏数据（.hdi文件），此时启动模拟器，显示一个选择界面，但字符的显示是不正常的，也无法操作。此时退出模拟器（有个机器人的button可以进入<code class="language-plaintext highlighter-rouge">Quick Menu</code>）。</p>

<blockquote>
  <p>在根目录（一般是<code class="language-plaintext highlighter-rouge">/sdcard</code>）下的<code class="language-plaintext highlighter-rouge">RetroArch/system</code>的文件夹中建立一个<code class="language-plaintext highlighter-rouge">np2kai</code>文件夹，把字库（文件名需改为<code class="language-plaintext highlighter-rouge">font.bmp</code>）放进去，就可以导入字库。</p>
</blockquote>

<blockquote>
  <p>打开游戏后，会发现屏幕上的按键失灵，这时进入<code class="language-plaintext highlighter-rouge">Quick Menu</code>，<code class="language-plaintext highlighter-rouge">Options</code>，把<code class="language-plaintext highlighter-rouge">Joypad D-pad to Mouse/Keyboard/Joypad Mapping</code>改为<code class="language-plaintext highlighter-rouge">Manual Keyboard</code>即可（原理不明）。</p>
</blockquote>

<h3 id="虚拟机配置的选用">虚拟机配置的选用</h3>

<p>默认的虚拟机配置较低，无法流畅运行游戏，需要进入<code class="language-plaintext highlighter-rouge">Quick Menu</code>，<code class="language-plaintext highlighter-rouge">Options</code>调节。</p>

<p>首先调节CPU的<strong>倍频</strong><code class="language-plaintext highlighter-rouge">CPU Clock Multiplier</code>，默认是4，加到8后卡顿改善，加<strong>16以上</strong>比较理想。</p>

<p>其次关于内存，尝试加到7以后并没有显著提升。但随着内存的增加，可以感觉到进入游戏的时间显著增加。</p>

<h2 id="体验优化">体验优化</h2>

<p>通过实体键盘和横屏改善游戏体验。</p>

<h3 id="使用键盘操作">使用键盘操作</h3>

<p>使用键盘在RetroArch上操作，需要配置键映射。在未运行游戏实例时进入设置，选择<code class="language-plaintext highlighter-rouge">Input</code>，进入第一个输入<code class="language-plaintext highlighter-rouge">Port 1 Controls</code>。必须配置的键有B(z),A(x)和Up/Down/Left/Right，选择按键名称，在键盘上<strong>长按对应键</strong>完成绑定。</p>

<h3 id="横屏显示">横屏显示</h3>

<blockquote>
  <p>RetroArch原生支持横屏显示</p>
</blockquote>

<p>通过设置系统自动旋转屏幕，或使用控制屏幕旋转的工具软件来实现横屏。</p>


        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/2021/07/06/execute-vscode-and-debug-java-program-in-termux.html" data-toggle="tooltip" data-placement="top" title="在Termux环境下执行VSCode与调试java程序">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/anonymous">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/cainslayer">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; cainslayer 2022</p>
      </div>
    </div>
  </div>
</footer>


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/scripts.js"></script>

<script src="/assets/scripts.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>



</body>

</html>
